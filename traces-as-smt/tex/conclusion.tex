\section{Conclusions and Future Work}
We have presented an SMT encoding of an MCAPI program execution that uses match pairs rather than the state-based or order-based encoding in the prior work. Unlike the existing method of SMT encoding, our encoding is the first encoding that correctly captures the non-deterministic behavior of an MCAPI program execution under \textit{infinite-buffer} semantics allowed in the MCAPI specification. In this paper, we proved that we can generate such an encoding by giving an execution trace and a complete set of match pairs. Further, we have proved that the same results can be obtained even if the match pairs are over-approximated as input. Also, we have provided an algorithm with $O(N^2)$ time complexity that over-approximates the true set of match pairs, where $N$ is the total number of code lines of the program. By comparing to the existing work in \cite{elwakil:padtad10}, the experimental results shows that our encoding is capable of capturing correct behavior of an MCAPI program execution. Further, our encoding reduces $70\%$ clauses of that of the work in \cite{elwakil:padtad10}. Also, it runs average eight times faster and uses two times less memory than that in \cite{elwakil:padtad10}.

The precision of the set of match pairs is essential to the efficiency of SMT encodings. Currently we have an over-approximated generation method which still keeps several ``bogus" match pairs in the generated set. New methods for generating a much more precise set of match pair are required. Also The method of DPOR are considered to combine with our SMT encoding to generate the execution traces. We can then use the SMT encoding to further improve the DPOR technique.

